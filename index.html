<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>–ü–æ–∫—É–ø–∫–∞ –∑–≤—ë–∑–¥</title>
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <style>
    * { box-sizing: border-box; }
    body {
      font-family: 'Inter', sans-serif;
      margin: 0; padding: 0;
      background: radial-gradient(circle at top, #0a0a0a, #000);
      color: white;
      text-align: center;
      min-height: 100vh;
      overflow-x: hidden;
    }

    h1 {
      font-size: 2rem;
      margin: 25px 0 10px;
      text-shadow: 0 0 12px #00f5ff;
    }
    .filter {
      margin-top: 5px;
    }
    select {
      padding: 10px 14px;
      border-radius: 8px;
      border: none;
      background: #111;
      color: #fff;
      font-size: 1rem;
      outline: none;
      box-shadow: 0 0 6px rgba(0,0,0,0.5);
    }

    .cards {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 16px;
      margin: 25px;
      padding-bottom: 80px;
    }

    .card {
      background: linear-gradient(145deg, #0f1829, #060606);
      border-radius: 16px;
      padding: 20px;
      box-shadow: 0 0 10px rgba(0,0,0,0.4);
      cursor: pointer;
      position: relative;
      overflow: hidden;
      transition: all .25s ease;
    }

    .card:hover {
      transform: scale(1.04);
      box-shadow: 0 0 20px rgba(0,245,255,0.4);
    }

    .card.selected {
      border: 2px solid #00f5ff;
      box-shadow: 0 0 30px #00f5ff;
    }

    .emoji { font-size: 42px; display: block; }
    .price { color: #00f5ff; font-weight: bold; margin-top: 6px; }

    #confirm {
      position: fixed;
      bottom: 20px;
      left: 50%;
      transform: translateX(-50%);
      padding: 14px 28px;
      background: linear-gradient(90deg, #0078ff, #00f5ff);
      border: none;
      border-radius: 12px;
      color: white;
      font-size: 18px;
      cursor: pointer;
      transition: all .2s ease;
      box-shadow: 0 0 15px rgba(0,245,255,0.4);
    }
    #confirm:disabled { opacity: 0.5; cursor: not-allowed; }

    /* –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ */
    .modal {
      position: fixed;
      top: 0; left: 0; right: 0; bottom: 0;
      display: none;
      justify-content: center;
      align-items: center;
      background: rgba(0,0,0,0.7);
      z-index: 10;
    }
    .modal-content {
      background: #111;
      border-radius: 16px;
      padding: 25px;
      width: 85%;
      max-width: 380px;
      text-align: center;
      box-shadow: 0 0 20px rgba(0,245,255,0.5);
    }
    .modal h2 { margin-top: 0; }
    .modal button {
      margin: 10px;
      padding: 10px 20px;
      border: none;
      border-radius: 8px;
      font-size: 16px;
      cursor: pointer;
    }
    .yes { background: #0078ff; color: #fff; }
    .no { background: #444; color: #fff; }

    /* —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ */
    #toast {
      position: fixed;
      bottom: -80px;
      left: 50%;
      transform: translateX(-50%);
      background: #00f5ff;
      color: #000;
      padding: 12px 24px;
      border-radius: 12px;
      font-weight: 600;
      box-shadow: 0 0 10px #00f5ff;
      transition: bottom .5s;
      z-index: 999;
    }

    @keyframes pulse {
      0%, 100% { box-shadow: 0 0 10px #00f5ff; }
      50% { box-shadow: 0 0 30px #00f5ff; }
    }
  </style>
</head>
<body>
  <h1>üåü –ú–∞–≥–∞–∑–∏–Ω –∑–≤—ë–∑–¥</h1>
  <div class="filter">
    <label>–§–∏–ª—å—Ç—Ä:</label>
    <select id="filter">
      <option value="all">–í—Å–µ –ø–∞–∫–µ—Ç—ã</option>
      <option value="small">–ú–∞–ª—ã–µ (–¥–æ 500)</option>
      <option value="big">–ë–æ–ª—å—à–∏–µ (–æ—Ç 1000)</option>
    </select>
  </div>
  <div class="cards" id="packs"></div>
  <button id="confirm" disabled>–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å</button>

  <div id="modal" class="modal">
    <div class="modal-content">
      <h2>–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ –ø–æ–∫—É–ø–∫—É</h2>
      <p id="modalText"></p>
      <button class="yes">‚úÖ –ö—É–ø–∏—Ç—å</button>
      <button class="no">‚ùå –û—Ç–º–µ–Ω–∞</button>
    </div>
  </div>

  <div id="toast">‚úÖ –ó–∞–∫–∞–∑ –æ—Ñ–æ—Ä–º–ª–µ–Ω!</div>

  <script>
    const tg = window.Telegram.WebApp;
    const data = [
      {id:1, emoji:"‚≠ê", name:"100 –∑–≤—ë–∑–¥", price:100},
      {id:2, emoji:"üåü", name:"500 –∑–≤—ë–∑–¥", price:450},
      {id:3, emoji:"üí´", name:"1000 –∑–≤—ë–∑–¥", price:800},
      {id:4, emoji:"üíé", name:"5000 –∑–≤—ë–∑–¥", price:3500},
      {id:5, emoji:"‚òÑÔ∏è", name:"10000 –∑–≤—ë–∑–¥", price:6500}
    ];

    const packsDiv = document.getElementById('packs');
    const confirmBtn = document.getElementById('confirm');
    const modal = document.getElementById('modal');
    const toast = document.getElementById('toast');
    const modalText = document.getElementById('modalText');
    let selected = null;

    function renderCards(filter = "all") {
      packsDiv.innerHTML = "";
      data.filter(p => {
        if (filter === "small") return p.price <= 450;
        if (filter === "big") return p.price >= 800;
        return true;
      }).forEach(p => {
        const card = document.createElement('div');
        card.className = 'card';
        card.dataset.val = p.price;
        card.innerHTML = `<span class="emoji">${p.emoji}</span>${p.name}<div class="price">${p.price} ‚ÇΩ</div>`;
        card.onclick = () => selectCard(card, p);
        packsDiv.appendChild(card);
      });
    }

    function selectCard(card, pack) {
      document.querySelectorAll('.card').forEach(c=>c.classList.remove('selected'));
      card.classList.add('selected');
      selected = pack;
      confirmBtn.disabled = false;
    }

    confirmBtn.addEventListener('click', () => {
      if (!selected) return;
      modal.style.display = 'flex';
      modalText.textContent = `${selected.name} –∑–∞ ${selected.price}‚ÇΩ`;
    });

    modal.querySelector('.yes').addEventListener('click', () => {
      modal.style.display = 'none';
      showToast();
      tg.sendData(JSON.stringify({ amount: selected.price }));
      setTimeout(()=>tg.close(),2000);
    });

    modal.querySelector('.no').addEventListener('click', () => {
      modal.style.display = 'none';
    });

    document.getElementById('filter').addEventListener('change', e => {
      renderCards(e.target.value);
    });

    function showToast() {
      toast.style.bottom = "30px";
      setTimeout(()=>toast.style.bottom="-80px",2000);
    }

    renderCards();
    tg.expand();
  </script>
</body>
</html>
